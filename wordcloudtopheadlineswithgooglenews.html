<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Word Cloud Practice</title>


<script src="https://cdn.anychart.com/releases/8.7.0/js/anychart-core.min.js"></script>
<script src="https://cdn.anychart.com/releases/8.7.0/js/anychart-tag-cloud.min.js"></script>

<style>
      html, body, #container {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      }
      text {
      	font-family: american typewriter ! important;
      	color: black ! important;
      }
</style>


  </head>
  <body onload="getTopArticles()">
    <div id="container" class='textStyling'></div>
    	<script language='javascript'>
      function getTopArticles() {
  //step 1: request object created
  request = new XMLHttpRequest();
  //step 2
  //var word = "Obama";
  request.open("GET",
    "https://newsapi.org/v2/everything?domains=wsj.com,nytimes.com,abc-news,cbs-news,cnbc,cnn,espn,fox-news, msnbc, the-washington-post,&pageSize=100&apiKey=ac41e42a0219400fbbc4a9a52887d40f"
    , true);
  //step 3
  request.onreadystatechange = function() {
    console.log(request.readyState);
    if (request.readyState == 3 && request.status == 200) {
      result = request.responseText;
    }
    else if (request.readyState == 4 && request.status !=200) {
      result = request.responseText;
    }
    else if (request.readyState == 4 && request.status == 200) {
      // Step 5: wait for done + success
        var result = JSON.parse(request.responseText);
        var articles = result.articles;
        //cycles through array and prints headline title and web_url as strings
        for (i=0;i<100;i++) {
        var string_headline = JSON.stringify(articles[i].title)
        //document.getElementById("articleList").innerHTML += string_headline + "<br>";
        var data;
        console.log("counter");
        //console.log(string_headline);
        data += string_headline + " ";
        console.log(data);
      }
      anychart.onDocumentReady(function () {
    // create data
    // create a chart
    var chart = anychart.tagCloud();
    chart.normal().fill("#d3d3d3");
    chart.hovered().fill("#a9a9a9");
    chart.selected().fill("#ff7f7f");
    chart.normal().fontWeight(600);
    var customColorScale = anychart.scales.ordinalColor();
customColorScale.ranges([
    {less: 2},
    {from: 2, to: 3},
    {from: 4, to: 5},
    {greater: 6}
]);
customColorScale.colors(["#D3D3D3", "#999999", "#666666", "#333333"]);

// set the color scale as the color scale of the chart
chart.colorScale(customColorScale);

// add a color range
chart.colorRange().enabled(true);
//     var customColorScale = anychart.scales.linearColor();
// customColorScale.colors(["#D3D3D3", "#1A1423"]);
//
// // set the color scale as the color scale of the chart
// chart.colorScale(customColorScale);
//
// // add a color range
// chart.colorRange().enabled(true);
    // set the parsing mode and configure parsing settings
    chart.data(data, {
    mode: "by-word",
    maxItems: 15,
    ignoreItems: [
                  "the",
                  "and",
                  "he",
                  "or",
                  "of",
                  "in",
                  "thy",
                  "a",
                  "as",
                  "New",
                  "York",
                  "journal",
                  "to",
                  "are",
                  "at",
                  "with",
                  "on",
                  "for",
                  "wall",
                  "street",
                  "journal",
                  "man",
                  "it",
                  "us",
                  "from",
                  "who",
                  "new york times",
                  "after",
                  "by",
                  "but",
                  "says",
                  "new",
                  "york",
                  "times",
                  "an",
                  "its",
                  "my",
                  "wont",
                  "will",
                  "can",
                  "is",
                  "into",
                  "all",
                  "your",
                  "how",
                  "don't",
                  "how",
                  "what",
                  "was",
                  "why",
                  "not",
                  "no"
                 ]
    });
    // set the chart title
    chart.title("Your WordCloud");
    // set the container id
    chart.container("container");
    // initiate drawing the chart
    chart.draw();
    chart.selected().fill("#1f66ad");

///code for the opening in new page, with google search
          chart.listen("pointClick", function(e){
          var url = "https://news.google.com/search?q=" + e.point.get("x");
          window.open(url, "_blank");
          });
          chart.listen("pointDblClick", function(e){
          var new_value = e.iterator.get("url");
          window.open(new_value,"_blank");
        });


    });
      }
  }
  //step 4: fire off HTTPrequest
  request.send();
}
</script>
</body>

<script language='javascript'>

</script>
</html>
